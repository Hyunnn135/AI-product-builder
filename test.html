<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">ìŒì‹ ì„ í˜¸ë„ í…ŒìŠ¤íŠ¸</title>
    <meta name="google-adsense-account" content="ca-pub-3416211588228348">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3416211588228348"
     crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main class="container">
        <div class="top-right-buttons">
            <button id="theme-toggle">ğŸŒ™</button> <!-- Added theme toggle -->
            <button id="language-toggle">EN</button>
        </div>
        <h1 id="page-title">ë°¥ vs ë©´: ë‹¹ì‹ ì˜ ì·¨í–¥ì€?</h1>
        <p id="page-description">ì›¹ìº ì„ í†µí•´ ë‹¹ì‹ ì´ ë°¥ì„ ì¢‹ì•„í•˜ëŠ”ì§€, ë©´ì„ ì¢‹ì•„í•˜ëŠ”ì§€ ì¸ê³µì§€ëŠ¥ì´ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤!</p>
        <p id="test-description-p1">
            ì´ í˜ì´ì§€ì—ì„œëŠ” Google Teachable Machineì„ í™œìš©í•˜ì—¬ ë°¥ê³¼ ë©´ ì´ë¯¸ì§€ì— íŠ¹í™”ëœ ì¸ê³µì§€ëŠ¥ ëª¨ë¸ì„ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            ì›¹ìº ì— ë°¥ ë˜ëŠ” ë©´ì´ í¬í•¨ëœ ì´ë¯¸ì§€ë¥¼ ë¹„ì¶”ë©´, ëª¨ë¸ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì²´ë¥¼ ì¸ì‹í•˜ê³  ë°¥ ë˜ëŠ” ë©´ì— ëŒ€í•œ ì„ í˜¸ë„(í™•ë¥ )ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.
        </p>
        <p id="test-description-p2">
            ì´ í…ŒìŠ¤íŠ¸ëŠ” ì‚¬ìš©ìì˜ ì‹ë‹¨ ì·¨í–¥ì„ ì¬ë¯¸ìˆê²Œ íƒìƒ‰í•˜ê³  ì¸ê³µì§€ëŠ¥ì˜ ì‹œê°ì  ì¸ì‹ ëŠ¥ë ¥ì„ ì²´í—˜í•  ìˆ˜ ìˆë„ë¡ ê³ ì•ˆë˜ì—ˆìŠµë‹ˆë‹¤.
            ì •í™•í•œ ê²°ê³¼ëŠ” ì›¹ìº ì˜ ì¡°ëª…, ì´ë¯¸ì§€ì˜ ì„ ëª…ë„, ëª¨ë¸ í•™ìŠµ ë°ì´í„°ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
        <div id="webcam-container"></div>
        <div id="label-container"></div>
        <button type="button" id="startButton" class="primary-button">í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
        <a href="/" class="home-link" id="home-link">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </main>

    <footer class="main-footer">
        <nav>
            <a href="/" id="footer-home">Home</a> |
            <a href="/about.html" id="footer-about">About Us</a> |
            <a href="/privacy.html" id="footer-privacy">Privacy Policy</a> |
            <a href="/terms.html" id="footer-terms">Terms of Service</a> | <!-- Added link -->
            <a href="/#contact-form-container" id="footer-contact">Contact Us</a> |
            <a href="/test.html" id="footer-food-test">Food Test</a>
        </nav>
        <p id="footer-copyright">&copy; 2026 AI Product Builder</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
    <script type="text/javascript">
        // More API functions here:
        // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

        const URL = "https://teachablemachine.withgoogle.com/models/B2G9-Yg46/";
        let model, webcam, labelContainer, maxPredictions;

        const elementsToTranslate = {
            'page-title': {
                'ko': 'ìŒì‹ ì„ í˜¸ë„ í…ŒìŠ¤íŠ¸',
                'en': 'Food Preference Test'
            },
            'page-description': {
                'ko': 'ì›¹ìº ì„ í†µí•´ ë‹¹ì‹ ì´ ë°¥ì„ ì¢‹ì•„í•˜ëŠ”ì§€, ë©´ì„ ì¢‹ì•„í•˜ëŠ”ì§€ ì¸ê³µì§€ëŠ¥ì´ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤!',
                'en': 'Through your webcam, AI will analyze whether you prefer rice or noodles!'
            },
            'test-description-p1': {
                'ko': 'ì´ í˜ì´ì§€ì—ì„œëŠ” Google Teachable Machineì„ í™œìš©í•˜ì—¬ ë°¥ê³¼ ë©´ ì´ë¯¸ì§€ì— íŠ¹í™”ëœ ì¸ê³µì§€ëŠ¥ ëª¨ë¸ì„ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›¹ìº ì— ë°¥ ë˜ëŠ” ë©´ì´ í¬í•¨ëœ ì´ë¯¸ì§€ë¥¼ ë¹„ì¶”ë©´, ëª¨ë¸ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì²´ë¥¼ ì¸ì‹í•˜ê³  ë°¥ ë˜ëŠ” ë©´ì— ëŒ€í•œ ì„ í˜¸ë„(í™•ë¥ )ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.',
                'en': 'On this page, you can experience an AI model specialized in rice and noodle images using Google Teachable Machine. When you point your webcam at an image containing rice or noodles, the model recognizes the object in real-time and analyzes your preference (probability) for rice or noodles.'
            },
            'test-description-p2': {
                'ko': 'ì´ í…ŒìŠ¤íŠ¸ëŠ” ì‚¬ìš©ìì˜ ì‹ë‹¨ ì·¨í–¥ì„ ì¬ë¯¸ìˆê²Œ íƒìƒ‰í•˜ê³  ì¸ê³µì§€ëŠ¥ì˜ ì‹œê°ì  ì¸ì‹ ëŠ¥ë ¥ì„ ì²´í—˜í•  ìˆ˜ ìˆë„ë¡ ê³ ì•ˆë˜ì—ˆìŠµë‹ˆë‹¤. ì •í™•í•œ ê²°ê³¼ëŠ” ì›¹ìº ì˜ ì¡°ëª…, ì´ë¯¸ì§€ì˜ ì„ ëª…ë„, ëª¨ë¸ í•™ìŠµ ë°ì´í„°ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                'en': 'This test is designed to funnily explore your dietary preferences and experience the visual recognition capabilities of artificial intelligence. Accurate results may vary depending on webcam lighting, image clarity, and model training data.'
            },
            'startButton': {
                'ko': 'í…ŒìŠ¤íŠ¸ ì‹œì‘',
                'en': 'Start Test'
            },
            'home-link': {
                'ko': 'ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°',
                'en': 'Go back to Main'
            },
            'footer-home': {
                'ko': 'í™ˆ',
                'en': 'Home'
            },
            'footer-about': {
                'ko': 'íšŒì‚¬ ì†Œê°œ',
                'en': 'About Us'
            },
            'footer-privacy': {
                'ko': 'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨',
                'en': 'Privacy Policy'
            },
            'footer-terms': { // New ID for translation
                'ko': 'ì´ìš© ì•½ê´€',
                'en': 'Terms of Service'
            },
            'footer-contact': {
                'ko': 'ë¬¸ì˜í•˜ê¸°',
                'en': 'Contact Us'
            },
            'footer-food-test': {
                'ko': 'ìŒì‹ í…ŒìŠ¤íŠ¸',
                'en': 'Food Test'
            },
            'footer-copyright': {
                'ko': '&copy; 2026 AI Product Builder',
                'en': '&copy; 2026 AI Product Builder'
            }
        };

        function setLanguage(lang) {
            document.documentElement.lang = lang; // Set HTML lang attribute
            for (const id in elementsToTranslate) {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = elementsToTranslate[id][lang];
                }
            }
            // Update button text explicitly as it might not be in elementsToTranslate initially
            const languageToggleButton = document.getElementById('language-toggle');
            if (languageToggleButton) {
                languageToggleButton.textContent = (lang === 'ko' ? 'EN' : 'KO');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const startButton = document.getElementById('startButton');
            const languageToggleButton = document.getElementById('language-toggle');
            const themeToggleButton = document.getElementById('theme-toggle'); // Get theme toggle button
            const body = document.body; // Get body element

            // Language functionality
            let currentLang = localStorage.getItem('lang') || 'ko';
            setLanguage(currentLang);

            languageToggleButton.addEventListener('click', () => {
                currentLang = (currentLang === 'ko' ? 'en' : 'ko');
                localStorage.setItem('lang', currentLang);
                setLanguage(currentLang);
            });

            // Theme toggle functionality (similar to main.js)
            themeToggleButton.addEventListener('click', () => {
                body.classList.toggle('dark-mode');
                const isDarkMode = body.classList.contains('dark-mode');
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
                themeToggleButton.textContent = isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™';
            });

            // Load saved theme from localStorage (similar to main.js)
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                body.classList.add('dark-mode');
                themeToggleButton.textContent = 'â˜€ï¸';
            } else {
                body.classList.remove('dark-mode');
                themeToggleButton.textContent = 'ğŸŒ™';
            }

            startButton.addEventListener('click', init);
        });

        async function init() {
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";

            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();

            const flip = true;
            webcam = new tmImage.Webcam(200, 200, flip);
            await webcam.setup();
            await webcam.play();
            window.requestAnimationFrame(loop);

            document.getElementById("webcam-container").appendChild(webcam.canvas);
            labelContainer = document.getElementById("label-container");
            for (let i = 0; i < maxPredictions; i++) {
                labelContainer.appendChild(document.createElement("div"));
            }
            document.getElementById('startButton').style.display = 'none';
        }

        async function loop() {
            webcam.update(); // update the webcam frame
            await predict();
            window.requestAnimationFrame(loop);
        }

        async function predict() {
            const prediction = await model.predict(webcam.canvas);
            for (let i = 0; i < maxPredictions; i++) {
                const classPrediction =
                    prediction[i].className + ": " + prediction[i].probability.toFixed(2);
                labelContainer.childNodes[i].innerHTML = classPrediction;
            }
        }
    </script>
</body>
</html>